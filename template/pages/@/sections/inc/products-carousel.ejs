<% if (Array.isArray(opt.items) && opt.items.length) {
  const title = opt.title ||
    (opt.collection && opt.collection.name) ||
    _.dictionary('popularProducts')
  const link = opt.link || (opt.collection && `/${opt.collection.slug}`)

  if (opt.shuffle) {
    let m = opt.items.filter(item => {
      return item.available && _.ecomUtils.inStock(item)
    }).length
    let t, i
    while (m) {
      i = Math.floor(Math.random() * m--)
      t = opt.items[m]
      opt.items[m] = opt.items[i]
      opt.items[i] = t
    }
  }
  %>
  
  <section
      class="apx_product-list my-5 <%= opt.classe_css %> "
      data-num_col_sm="1"
      data-carrossel_sm="Sim"
      data-num_col_md="3"
      data-carrossel_md="Sim"
      data-carrossel_dots_md="Sim"
      data-carrossel_arrows_md="Sim"
      data-carrossel_dots_sm="Sim"
      data-carrossel_arrows_sm="Sim"
     >
     <div class="<%= opt.container %> <%= opt.padding_sm %> px-md-5 pb-5">
        <%
            if(opt.title){
                %>
                    <div class="apx_section-title text-center">
                        <h2 class="text-bold text-uppercase"><%- opt.title %></h2>
                    </div>
                <%
            }
        %>
        <div class="row list mx-0">        
            <% for (let i = 0; i < opt.items.length; i++) { %>
              
                <div class="px-md-1 px-1 my-4">
                <%- await include('@/sections/inc/product-item', {
                  _, opt: { item: opt.items[i] }
                }) %>
              </div>
            <% } %>          
        </div>
    </div>
    </section>

<% } %>
